<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <title>Карта ЮМира</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
	<meta property="og:title" content="Карта ЮМира">
	<meta property="og:description" content="Карта ЮМира. Только актуальные границы! Обновляется КАООН.">
	<meta property="og:image" content="https://i.imgur.com/N86I981.png">
	<script src="/js/head.load.min.js"></script>
    <script>
    head.load("https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css", "https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js", function() {
        head.load("https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&callback=initialize", "/js/module/switcher.js");
        window.smallterritoriesloaded = false; window.poistatus = false;
});
/* мапа */
function initialize() {
  var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(54.9382099, 43.3239641),
    styles: [{"featureType":"administrative.country","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.attraction","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"transit.station.rail","elementType":"all","stylers":[{"visibility":"on"},{"gamma":3.17}]}]
  };
  

  var map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);
	  
	// Границы AMAP
  map.data.loadGeoJson('//карта.юмир.рф/amap/aut.geo.json'); // УФ Австрия
  map.data.loadGeoJson('//карта.юмир.рф/amap/usa.geo.json'); // США
  map.data.loadGeoJson('//карта.юмир.рф/amap/swe.geo.json'); // Швеция
  map.data.loadGeoJson('//карта.юмир.рф/amap/nor.geo.json'); // УФ Норвегия (без острова)
  map.data.loadGeoJson('//карта.юмир.рф/amap/fin.geo.json'); // Либерленд Финляндия
  map.data.loadGeoJson('//карта.юмир.рф/amap/irl.geo.json'); // ФЕСШ Ирландия
  map.data.loadGeoJson('//карта.юмир.рф/amap/esp.geo.json'); // ФЕСШ Испания
  map.data.loadGeoJson('//карта.юмир.рф/amap/can.geo.json'); // Канада
  map.data.loadGeoJson('//карта.юмир.рф/amap/POL.geo.json'); // ФЕСШ Польша
  map.data.loadGeoJson('//карта.юмир.рф/amap/DEU.geo.json'); // Германия
  map.data.loadGeoJson('//карта.юмир.рф/amap/CZE.geo.json'); // ФЕСШ Чехия (ранее Силенд)
  map.data.loadGeoJson('//карта.юмир.рф/amap/SVK.geo.json'); // ФЕСШ Словакия (+часть от Силенда)
  map.data.loadGeoJson('//карта.юмир.рф/amap/DNK.geo.json'); // Германия Дания (от Силенда)
  map.data.loadGeoJson('//карта.юмир.рф/amap/ITA.geo.json'); // ФЕСШ Италия
  map.data.loadGeoJson('//карта.юмир.рф/amap/UKR.geo.json'); // ФЕСШ Украина
  map.data.loadGeoJson('//карта.юмир.рф/amap/LVA.geo.json'); // ФЕСШ Латвия
  map.data.loadGeoJson('//карта.юмир.рф/amap/LUX.geo.json'); // ФЕСШ Люксембург
  // Границы non-AMAP
  
  var featureStyle = {
    strokeWeight: 0.7,
	preserveViewport: true
  }
                     map.data.setStyle(featureStyle);
                     
                 
// Load countries
        $.getJSON("/data/countries.json", function(json1) {
          for (var i = 0, length = json1.length; i < length; i++) {
  var data = json1[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 

  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title,
    icon: data.icon,
    opacity: 0.5
  });
}
      });
    console.log('[FINE] Countries loaded from /data/countries.json!');
    
// Load smallterritories
google.maps.event.addListener(map, 'zoom_changed', function() {
var zoomLevel =  map.getZoom();
console.log('Wow! '+zoomLevel)
if (zoomLevel>=7) {
    if(window.smallterritoriesloaded == true) {
        // Уже было загружено
    }
    else {
     $.getJSON("/data/smallterritories.json", function(json2) {
          for (var i = 0, length = json2.length; i < length; i++) {
  var data = json2[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 

  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title,
    icon: data.icon,
    opacity: 0.5
  });
}
 console.log('[FINE] Small territories loaded from /data/smallterritories.json!');
 window.smallterritoriesloaded = true;
});
}
}

if (zoomLevel>=14) {
    if(window.poistatus == true) {
        // Уже было загружено
    }
    else {
     $.getJSON("/data/poi.json", function(json3) {
          for (var i = 0, length = json3.length; i < length; i++) {
  var data = json3[i],
      latLng = new google.maps.LatLng(data.lat, data.lng); 
  // Creating a marker and putting it on the map
  var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: data.title
  });
}
 console.log('[FINE] POI loaded from /data/poi.json!');
 window.poistatus = true;
});
}
}

});
    
}
    </script>
    <style>
            html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
    <div id="map-canvas"></div>
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
     </body>
</html>
