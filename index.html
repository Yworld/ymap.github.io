<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <title>Карта ЮМира</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
	<meta property="og:title" content="Карта ЮМира">
	<meta property="og:description" content="Карта ЮМира. Только актуальные границы! Обновляется ООН.">
	<meta property="og:image" content="https://i.imgur.com/ItWHVKj.png">
	<script src="js/head.load.min.js"></script>
	<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false&key=AIzaSyC1sF2LjK5mJTad4iRty_a0zmFjJZI3b6o"></script>
    <script>function isBlank(str) {return (!str || /^\s*$/.test(str));}
    head.load("https://yastatic.net/jquery/2.1.4/jquery.min.js", "http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css", "http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js", "js/googlemaps.js", "js/leaflet-search.min.js", "css/leaflet-search.min.css", "https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css", function() {
var map = new L.Map('map', {center: new L.LatLng(39.815422, -40.614981), zoom: 3});
var ggl = new L.Google('ROADMAP', {
	attribution: 'ООН',
	mapOptions: {
		styles: [{"featureType":"administrative.country","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.attraction","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"transit.station.rail","elementType":"all","stylers":[{"visibility":"on"},{"gamma":3.17}]}]
	}
});
map.addLayer(ggl);

// Markers
/* Library of flags */
USflag = L.icon({iconUrl: 'https://i.imgur.com/MoDY6eP.png'});
UEflag = L.icon({iconUrl: 'https://i.imgur.com/IsEfvce.png'});
UFflag = L.icon({iconUrl: 'https://i.imgur.com/9Ow6bJC.png'});
OPflag = L.icon({iconUrl: 'https://i.imgur.com/SuJr9C7.png'});
LLflag = L.icon({iconUrl: 'https://i.imgur.com/aNRALe7.png'});


//crhere
var countries = [
		{"flag_loc":[20.778816, -157.931706], "flag_icon": USflag, "name":"Соединённые Штаты Америки"}, // США (Гавайи)
		{"flag_loc":[53.434088, -9.997304], "flag_icon": UEflag, "name":"Сообщество Европейских Штатов"}, // Ирл.
		{"flag_loc":[54.071975, 25.215015], "flag_icon": LLflag, "name":"Либерленд"}, // Беларусь
		{"flag_loc":[42.365937, 8.572411], "flag_icon": LLflag, "name":"Либерленд"}, // Корсика
		{"flag_loc":[56.037108, 8.289307], "flag_icon": LLflag, "name":"Либерленд"}, // Дания #SEARCH
		{"flag_loc":[-29.875361, 21.259279], "flag_icon": OPflag, "name":"Опулентум"}, // ЮАР
		{"flag_loc":[48.221057, 16.330613], "flag_icon": OPflag, "name":"Опулентум"}, // Вена (ОПЛ) #SEARCH
		{"flag_loc":[52.088086, -111.932295], "flag_icon": USflag, "name":"Соединённые Штаты Америки"}, // США (Северная Америка) #SEARCH
		{"flag_loc":[54.535809, -3.204708], "flag_icon": UEflag, "name":"Сообщество Европейских Штатов"}, // Великобритания #SEARCH
	];

var markersLayer = new L.LayerGroup();
map.addLayer(markersLayer);
var controlSearch = new L.Control.Search({layer: markersLayer, initial: false, position:'topleft'});
map.addControl(controlSearch);

// GeoJSON compiled
var nullGeoJSON = [];
var myStyle = {
    "weight": 1.1,
    "fillOpacity": 0,
    "opacity": 1,
    "color": "black",
    "clickable": false
};
var boundaries = new L.geoJson(nullGeoJSON, {
    style: myStyle
});
boundaries.addTo(map);

$.ajax({
dataType: "json",
url: "/compiled.json",
success: function(data) {
    $(data.features).each(function(key, data) {
        boundaries.addData(data);
    });
}
}).error(function() {});

for(i in countries) {
		var countryName = countries[i].name;
			if(countries[i].name == 'Сообщество Европейских Штатов') {
				union = 'Европейский союз; часть США';
				capital = 'Лондон';
			} else if(countries[i].name == 'Соединённые Штаты Америки') {
				union = 'Не состоит в союзах';
				capital = 'Вашингтон';
			} else if(countries[i].name == 'Либерленд') {
				union = 'Европейский союз';
				capital = 'Копенгаген';
			} else if(countries[i].name == 'Опулентум') {
				union = 'Не состоит в союзах';
				capital = 'Вена';
			}
			var popup = '<b>'+countries[i].name+'</b><br><i class="fa fa-university" aria-hidden="true"></i> '+union+'<br><i class="fa fa-location-arrow" aria-hidden="true"></i> '+capital;
			var loc = countries[i].flag_loc;
			var flag = countries[i].flag_icon;
			var marker = new L.Marker(new L.latLng(loc), {icon: flag, title: countryName, opacity:0.5} );
		marker.bindPopup(popup);
		markersLayer.addLayer(marker);
	}
});
    </script>
    <style>
        html, body, #map {
        height: 100%;
        margin: 0px;
        padding: 0px;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
<div id="map">
</div>
     </body>
</html>
