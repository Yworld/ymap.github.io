<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <title>Карта ЮМира</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
	<meta property="og:title" content="Карта ЮМира">
	<meta property="og:description" content="Карта ЮМира. Только актуальные границы! Обновляется КАООН.">
	<meta property="og:image" content="https://i.imgur.com/ItWHVKj.png">
	<script src="js/head.load.min.js"></script>
	<script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
    <script>function isBlank(str) {return (!str || /^\s*$/.test(str));}
    head.load("https://yastatic.net/jquery/2.1.4/jquery.min.js", "http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css", "http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js", "js/googlemaps.js", "js/leaflet-search.min.js", "css/leaflet-search.min.css", function() {
var map = new L.Map('map', {center: new L.LatLng(39.815422, -40.614981), zoom: 3});
var ggl = new L.Google('ROADMAP', {
	attribution: 'ООН',
	mapOptions: {
		styles: [{"featureType":"administrative.country","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.government","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.school","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi.attraction","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"transit.station.rail","elementType":"all","stylers":[{"visibility":"on"},{"gamma":3.17}]}]
	}
});
map.addLayer(ggl);

// Markers
/* Library of flags */
USflag = L.icon({iconUrl: 'https://i.imgur.com/MoDY6eP.png'});
UKRflag = L.icon({iconUrl: 'https://i.imgur.com/BoTGRNC.png'});
UFflag = L.icon({iconUrl: 'https://i.imgur.com/9Ow6bJC.png'});
PRUflag = L.icon({iconUrl: 'https://i.imgur.com/PoKOp1p.png'});
ECflag = L.icon({iconUrl: 'https://i.imgur.com/AgjY8Gm.png'});


//crhere
var countries = [
		{"flag_loc":[52.088086, -111.932295], "flag_icon": USflag, "name":"Соединённые Штаты Америки", "union": ""}, // США (Северная Америка)
		{"flag_loc":[63.258274, 13.178204], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Швеция
		{"flag_loc":[52.213590, 8.526374], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Германия
		{"flag_loc":[56.132939, 8.428532], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Дания
		{"flag_loc":[48.925550, -0.994625], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Франция (часть АТШ Франция)
		{"flag_loc":[45.657338, 4.429842], "flag_icon": UFflag, "name":"Утенийская Федерация", "union": "Утенийский Союз"}, // Франция (часть УФ)
		{"flag_loc":[48.462923, 13.967212], "flag_icon": UFflag, "name":"Утенийская Федерация", "union": ""}, // Австрия
		{"flag_loc":[52.540564, 4.409770], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Нидерланды
		{"flag_loc":[53.104995, 17.921029], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Польша
		{"flag_loc":[50.552973, 29.940071], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Украина
		{"flag_loc":[47.595983, 27.825608], "flag_icon": PRUflag, "name":"Периферическая Республика Утения", "union": "Утенийский Союз"}, // Молдавия
		{"flag_loc":[-24.137767, 132.796687], "flag_icon": PRUflag, "name":"Периферическая Республика Утения", "union": "Утенийский Союз"}, // Австралия
		{"flag_loc":[47.079239, 7.802702], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Швейцария
		{"flag_loc":[42.364831, 8.604211], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Арстотцка
		{"flag_loc":[54.535809, -3.204708], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Великобритания
		{"flag_loc":[53.434088, -9.997304], "flag_icon": PRUflag, "name":"Периферическая Республика Утения", "union": "Утенийский Союз"}, // С. Ирл.
		{"flag_loc":[35.360155, 32.241716], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Кипр
		{"flag_loc":[50.318249, 14.693030], "flag_icon": ECflag, "name":"Европейская Конфедерация", "union": ""}, // Чехия
		{"flag_loc":[26.000311, -105.859393], "flag_icon": PRUflag, "name":"Периферическая Республика Утения", "union": "Утенийский Союз"}, // Мексика
	];

var markersLayer = new L.LayerGroup();
map.addLayer(markersLayer);
var controlSearch = new L.Control.Search({layer: markersLayer, initial: false, position:'topleft'});
map.addControl(controlSearch);

// GeoJSON compiled
var nullGeoJSON = [];
var myStyle = {
    "weight": 1.1,
    "fillOpacity": 0,
    "opacity": 1,
    "color": "black",
    "clickable": false
};
var boundaries = new L.geoJson(nullGeoJSON, {
    style: myStyle
});
boundaries.addTo(map);

$.ajax({
dataType: "json",
url: "http://карта.юмир.рф/compiled.json",
success: function(data) {
    $(data.features).each(function(key, data) {
        boundaries.addData(data);
    });
}
}).error(function() {});

for(i in countries) {
		var countryName = countries[i].name;
		if(isBlank(countries[i].union) == true) {
			var popup = '<b>'+countries[i].name+'</b>';
		} else {
			var popup = '<b>'+countries[i].name+'</b><br>'+countries[i].union;
		}
			var loc = countries[i].flag_loc;
			var flag = countries[i].flag_icon;
			var marker = new L.Marker(new L.latLng(loc), {icon: flag, title: countryName, opacity:0.5} );
		marker.bindPopup(popup);
		markersLayer.addLayer(marker);
	}
});
    </script>
    <style>
        html, body, #map {
        height: 100%;
        margin: 0px;
        padding: 0px;
        font-family: Arial, sans-serif;
      }
    </style>
  </head>
  <body>
<div id="map">
</div>
     </body>
</html>